<!DOCTYPE html>
<html>
<head>
  <title>LASSI2 Weekly Status</title>
   <link rel="stylesheet" href="weekly_stats.css">
</head>
<body>


<header class="Header" id="header">
	<div class="Header-block">
		<span class="Header-menu" id="header-menu">
		</span>

		<div class="Header-user" id="header-user">

		</div>
		<div class="u-hidden u-lg-block">

      <div class="Titles Titles--hero">
      <h1 class="Titles-main">LASSI2</h1>

      <div class="Titles-sub">Weekly Stats</div>
      </div>
    </div>
	</div>
	<aside class="Header-auth" id="header-auth">
		<div class="Header-embedApi" id="embed-api-auth-container"/>
		<a class="Header-logout" href="https://accounts.google.com/logout">Logout</a>
	</aside>
</header>



<div class="Dashboard Dashboard--full">


  <div class="Screenshot" id="auth-button"></div>

  <div class="Titles">
  	<h1 class="Titles-main" id="view-name">Select a View</h1>
  </div>


  <ul class="FlexGrid FlexGrid--halves">
  		<li class="FlexGrid-item">
        <div id="view-selector-container"></div>
      </li>

  		<li class="FlexGrid-item">
        <div id="date-range-selector-container"></div>
      </li>
  </ul>
  <div class="Screenshot"></div>




  <ul class="FlexGrid FlexGrid--halves">
  		<li class="FlexGrid-item">
  		  <div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Week Session Usage Comparison</h1>
  					<div class="Titles-sub">By sessions</div>
  				</header>
          <figure class="Chartjs-figure" id="weekly-session-chart-container"/>
        </div>
        <div class="Chartjs-legend" id="weekly-session-legend-container"/>
      </li>

  		<li class="FlexGrid-item">
  			<div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Month Session Usage Comparison</h1>
  					<div class="Titles-sub">By sessions</div>
  				</header>
  				<figure class="Chartjs-figure" id="monthly-session-chart-container"/>
  			</div>
  		<div class="Chartjs-legend" id="monthly-session-legend-container"/>
  		</li>

  		<li class="FlexGrid-item">
  		  <div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Week Session Duration Comparison</h1>
  					<div class="Titles-sub">By average session length (seconds)</div>
  				</header>
          <figure class="Chartjs-figure" id="weekly-session-duration-chart-container"/>
        </div>
        <div class="Chartjs-legend" id="weekly-session-duration-legend-container"/>
      </li>
  		<li class="FlexGrid-item">
  			<div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Month Session Duration Comparison</h1>
  					<div class="Titles-sub">By average session length (seconds)</div>
  				</header>
  				<figure class="Chartjs-figure" id="monthly-session-duration-chart-container"/>
  			</div>
  		<div class="Chartjs-legend" id="monthly-session-duration-legend-container"/>
  		</li>

  		<li class="FlexGrid-item">
    		  <div class="Chartjs">
    				<header class="Titles">
    					<h1 class="Titles-main">Week Content Usage Comparison</h1>
    					<div class="Titles-sub">By page views</div>
    				</header>
            <figure class="Chartjs-figure" id="weekly-content-chart-container"/>
          </div>
        <div class="Chartjs-legend" id="weekly-content-legend-container"/>
      </li>

  		<li class="FlexGrid-item">
  			<div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Month Content Usage Comparison</h1>
  					<div class="Titles-sub">By page views</div>
  				</header>
  				<figure class="Chartjs-figure" id="monthly-content-chart-container"/>
  			</div>
  		<div class="Chartjs-legend" id="monthly-content-legend-container"/>
  		</li>

  		<li class="FlexGrid-item">
  		  <div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Week Browser Comparison</h1>
  					<div class="Titles-sub">By page views</div>
  				</header>
          <figure class="Chartjs-figure" id="weekly-browser-chart-container"/>
        </div>
        <div class="Chartjs-legend" id="weekly-browser-legend-container"/>
      </li>

  		<li class="FlexGrid-item">
  			<div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Past Year Browser Comparison</h1>
  					<div class="Titles-sub">By page views</div>
  				</header>
  				<figure class="Chartjs-figure" id="yearly-browser-chart-container"/>
  			</div>
  		<div class="Chartjs-legend" id="yearly-browser-legend-container"/>
  		</li>

  		<li class="FlexGrid-item">
  		  <div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Week Internet Explorer Comparison</h1>
  					<div class="Titles-sub">By page views</div>
  				</header>
          <figure class="Chartjs-figure" id="weekly-ieversionr-chart-container"/>
        </div>
        <div class="Chartjs-legend" id="weekly-ieversionr-legend-container"/>
      </li>

  		<li class="FlexGrid-item">
  			<div class="Chartjs">
  				<header class="Titles">
  					<h1 class="Titles-main">Quarterly Internet Explorer Comparison</h1>
  					<div class="Titles-sub">By page views</div>
  				</header>
  				<figure class="Chartjs-figure" id="chart-6-container"/>
  			</div>
  		<div class="Chartjs-legend" id="legend-6-container"/>
  		</li>

  </ul>

</div>



<!-- Step 2: Load the library. -->
<script>
(function(w,d,s,g,js,fjs){
  g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(cb){this.q.push(cb)}};
  js=d.createElement(s);fjs=d.getElementsByTagName(s)[0];
  js.src='https://apis.google.com/js/platform.js';
  fjs.parentNode.insertBefore(js,fjs);js.onload=function(){g.load('analytics')};
}(window,document,'script'));
</script>


<script src="javascript/Chart.min.js"></script>

<script src="javascript/moment.min.js"></script>

<script src="javascript/underscore-min.js"></script>

<!-- Include the ViewSelector2 component script. -->
<script src="javascript/view-selector2.js"></script>

<!-- Include the DateRangeSelector component script. -->
<script src="javascript/date-range-selector.js"></script>

<!-- Include the ActiveUsers component script. -->
<script src="javascript/active-users.js"></script>

<script src="weekly_stats.js"></script>

<script>
gapi.analytics.ready(function() {

  // Step 3: Authorize the user.

  var CLIENT_ID = '940998236407-ll26vtigl8bs52nt0ld3cumii6kmesmg.apps.googleusercontent.com';

  gapi.analytics.auth.authorize({
    container: 'auth-button',
    clientid: CLIENT_ID,
  });



  gapi.analytics.auth.on('success', function(response) {
    viewSelector.execute();
  });

  /**
   * Create a new DateRangeSelector instance to be rendered inside of an
   * element with the id "date-range-selector-container".
   */

   var dateRangeSelector = new gapi.analytics.ext.DateRangeSelector({
      container: 'date-range-selector-container'
    })
    .set({'start-date': '2014-12-08',
      'end-date':  '2014-12-14',
    })
    .execute();

   /**
   * Create a new ViewSelector2 instance to be rendered inside of an
   * element with the id "view-selector-container".
   */
  var viewSelector = new gapi.analytics.ext.ViewSelector2({
    container: 'view-selector-container',
  })
  .execute();

  viewSelector.on('viewChange', function(data) {

    var title = document.getElementById('view-name');
    title.innerHTML = data.property.name + ' (' + data.view.name + ')';

    var startDate = '2014-12-08';
    var endDate = '2014-12-14';


    renderWeekOverWeekChart(data.ids, startDate, endDate);

    _.delay(renderWeekOverWeekSessionDurationChart, 500 + Math.random()*500, data.ids, startDate, endDate);

    _.delay(renderWeekContentUsageChart, 500 + Math.random()*500, data.ids, startDate, endDate);

    _.delay(renderTopBrowsersPeriod, 500 + Math.random()*500,data.ids, startDate, endDate);

  });

  // Set some global Chart.js defaults.
  Chart.defaults.global.animationSteps = 60;
  Chart.defaults.global.animationEasing = 'easeInOutQuart';
  Chart.defaults.global.responsive = true;
  Chart.defaults.global.maintainAspectRatio = false;

});
</script>
</body>
</html>