!function e(t,r,a){function n(i,s){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return n(r?r:e)},l,l.exports,e,t,r,a)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(e){var t=e("javascript-api-utils/lib/account-summaries");gapi.analytics.ready(function(){function e(e,t,r){e.innerHTML=t.map(function(e){var t=e.id==r?"selected ":" ";return"<option "+t+'value="'+e.id+'">'+e.name+"</option>"}).join("")}function r(e){return e.ids||e.viewId?{prop:"viewId",value:e.viewId||e.ids&&e.ids.replace(/^ga:/,"")}:e.propertyId?{prop:"propertyId",value:e.propertyId}:e.accountId?{prop:"accountId",value:e.accountId}:void 0}gapi.analytics.createComponent("ViewSelector2",{execute:function(){return this.setup_(function(){this.updateAccounts_(),this.changed_&&(this.render_(),this.onChange_())}.bind(this)),this},set:function(e){if(!!e.ids+!!e.viewId+!!e.propertyId+!!e.accountId>1)throw new Error('You cannot specify more than one of the following options: "ids", "viewId", "accountId", "propertyId"');if(e.container&&this.container)throw new Error("You cannot change containers once a view selector has been rendered on the page.");var t=this.get();return(t.ids!=e.ids||t.viewId!=e.viewId||t.propertyId!=e.propertyId||t.accountId!=e.accountId)&&(t.ids=null,t.viewId=null,t.propertyId=null,t.accountId=null),gapi.analytics.Component.prototype.set.call(this,e)},setup_:function(e){function r(){t.get().then(function(t){a.summaries=t,a.accounts=a.summaries.all(),e()},function(e){a.emit("error",e)})}var a=this;gapi.analytics.auth.isAuthorized()?r():gapi.analytics.auth.on("success",r)},updateAccounts_:function(){var e,t,a,n=this.get(),o=r(n);if(o)switch(o.prop){case"viewId":e=this.summaries.getProfile(o.value),t=this.summaries.getAccountByProfileId(o.value),a=this.summaries.getWebPropertyByProfileId(o.value);break;case"propertyId":a=this.summaries.getWebProperty(o.value),t=this.summaries.getAccountByWebPropertyId(o.value),e=a&&a.views&&a.views[0];break;case"accountId":t=this.summaries.getAccount(o.value),a=t&&t.properties&&t.properties[0],e=a&&a.views&&a.views[0]}else t=this.accounts[0],a=t&&t.properties&&t.properties[0],e=a&&a.views&&a.views[0];t||a||e?(t!=this.account||a!=this.property||e!=this.view)&&(this.changed_={account:t&&t!=this.account,property:a&&a!=this.property,view:e&&e!=this.view},this.account=t,this.properties=t.properties,this.property=a,this.views=a&&a.views,this.view=e,this.ids=e&&"ga:"+e.id):this.emit("error",new Error("You do not have access to "+o.prop.slice(0,-2)+" : "+o.value))},render_:function(){var t=this.get();this.container="string"==typeof t.container?document.getElementById(t.container):t.container,this.container.innerHTML=t.template||this.template;var r=this.container.querySelectorAll("select"),a=this.accounts,n=this.properties||[{name:"(Empty)",id:""}],o=this.views||[{name:"(Empty)",id:""}];e(r[0],a,this.account.id),e(r[1],n,this.property&&this.property.id),e(r[2],o,this.view&&this.view.id),r[0].onchange=this.onUserSelect_.bind(this,r[0],"accountId"),r[1].onchange=this.onUserSelect_.bind(this,r[1],"propertyId"),r[2].onchange=this.onUserSelect_.bind(this,r[2],"viewId")},onChange_:function(){var e={account:this.account,property:this.property,view:this.view,ids:this.view&&"ga:"+this.view.id};this.changed_&&(this.changed_.account&&this.emit("accountChange",e),this.changed_.property&&this.emit("propertyChange",e),this.changed_.view&&(this.emit("viewChange",e),this.emit("idsChange",e),this.emit("change",e.ids))),this.changed_=null},onUserSelect_:function(e,t){var r={};r[t]=e.value,this.set(r),this.execute()},template:'<div class="ViewSelector2">  <div class="ViewSelector2-item">    <select></select>  </div>  <div class="ViewSelector2-item">     <select></select>  </div>  <div class="ViewSelector2-item">    <select></select>  </div></div>'})})},{"javascript-api-utils/lib/account-summaries":3}],2:[function(e,t){function r(e){this.accounts_=e,this.webProperties_=[],this.profiles_=[],this.accountsById_={},this.webPropertiesById_=this.propertiesById_={},this.profilesById_=this.viewsById_={};for(var t,r=0;t=this.accounts_[r];r++)if(this.accountsById_[t.id]={self:t},t.webProperties){a(t,"webProperties","properties");for(var n,o=0;n=t.webProperties[o];o++)if(this.webProperties_.push(n),this.webPropertiesById_[n.id]={self:n,parent:t},n.profiles){a(n,"profiles","views");for(var i,s=0;i=n.profiles[s];s++)this.profiles_.push(i),this.profilesById_[i.id]={self:i,parent:n,grandParent:t}}}}function a(e,t,r){Object.defineProperty?Object.defineProperty(e,r,{get:function(){return e[t]}}):e[r]=e[t]}r.prototype.all=function(){return this.accounts_},a(r.prototype,"all","allAccounts"),r.prototype.allWebProperties=function(){return this.webProperties_},a(r.prototype,"allWebProperties","allProperties"),r.prototype.allProfiles=function(){return this.profiles_},a(r.prototype,"allProfiles","allViews"),r.prototype.get=function(e){if(!!e.accountId+!!e.webPropertyId+!!e.propertyId+!!e.profileId+!!e.viewId>1)throw new Error('get() only accepts an object with a single property: either "accountId", "webPropertyId", "propertyId", "profileId" or "viewId"');return this.getProfile(e.profileId||e.viewId)||this.getWebProperty(e.webPropertyId||e.propertyId)||this.getAccount(e.accountId)},r.prototype.getAccount=function(e){return this.accountsById_[e]&&this.accountsById_[e].self},r.prototype.getWebProperty=function(e){return this.webPropertiesById_[e]&&this.webPropertiesById_[e].self},a(r.prototype,"getWebProperty","getProperty"),r.prototype.getProfile=function(e){return this.profilesById_[e]&&this.profilesById_[e].self},a(r.prototype,"getProfile","getView"),r.prototype.getAccountByProfileId=function(e){return this.profilesById_[e]&&this.profilesById_[e].grandParent},a(r.prototype,"getAccountByProfileId","getAccountByViewId"),r.prototype.getWebPropertyByProfileId=function(e){return this.profilesById_[e]&&this.profilesById_[e].parent},a(r.prototype,"getWebPropertyByProfileId","getPropertyByViewId"),r.prototype.getAccountByWebPropertyId=function(e){return this.webPropertiesById_[e]&&this.webPropertiesById_[e].parent},a(r.prototype,"getAccountByWebPropertyId","getAccountByPropertyId"),t.exports=r},{}],3:[function(e,t){function r(){var e=gapi.client.analytics.management.accountSummaries.list().then(function(e){return e});return new e.constructor(function(t,r){var a=[];e.then(function o(e){var i=e.result;i.items?a=a.concat(i.items):r(new Error("You do not have any Google Analytics accounts. Go to http://google.com/analytics to sign up.")),i.startIndex+i.itemsPerPage<=i.totalResults?gapi.client.analytics.management.accountSummaries.list({"start-index":i.startIndex+i.itemsPerPage}).then(o):t(new n(a))}).then(null,r)})}var a,n=e("./account-summaries");t.exports={get:function(e){return e&&(a=null),a||(a=r())}}},{"./account-summaries":2}]},{},[1]);